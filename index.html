<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìä Controle de Vendas PRO | Sistema Completo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* ===== RESET & VARI√ÅVEIS ===== */
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --success: #2ecc71;
            --danger: #e74c3c;
            --warning: #f39c12;
            --info: #3498db;
            --dark: #2c3e50;
            --light: #ecf0f1;
            --gray: #95a5a6;
            --sidebar: #1a1a2e;
            --card-bg: #ffffff;
            --hover: #f8f9fa;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            color: var(--dark);
        }
        
        /* ===== LAYOUT PRINCIPAL ===== */
        .app-container {
            display: grid;
            grid-template-columns: 260px 1fr;
            min-height: 100vh;
        }
        
        /* ===== SIDEBAR ===== */
        .sidebar {
            background: var(--sidebar);
            color: white;
            padding: 25px 20px;
            box-shadow: 5px 0 15px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            height: 100vh;
            overflow-y: auto;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(255,255,255,0.1);
        }
        
        .logo i {
            color: var(--primary);
            font-size: 26px;
        }
        
        .nav-menu {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .nav-item {
            padding: 14px 18px;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .nav-item:hover {
            background: rgba(255,255,255,0.1);
            transform: translateX(5px);
        }
        
        .nav-item.active {
            background: var(--primary);
            box-shadow: 0 4px 12px rgba(67, 97, 238, 0.3);
        }
        
        .nav-item i {
            font-size: 18px;
            width: 24px;
            text-align: center;
        }
        
        /* ===== CONTE√öDO PRINCIPAL ===== */
        .main-content {
            padding: 25px;
            overflow-y: auto;
            max-height: 100vh;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(0,0,0,0.08);
        }
        
        .page-title {
            font-size: 28px;
            font-weight: 700;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .user-actions {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        .btn {
            padding: 12px 24px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--secondary);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(67, 97, 238, 0.4);
        }
        
        .btn-success {
            background: var(--success);
            color: white;
        }
        
        .btn-warning {
            background: var(--warning);
            color: white;
        }
        
        .btn-danger {
            background: var(--danger);
            color: white;
        }
        
        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }
        
        /* ===== ALERTAS ===== */
        .alert {
            padding: 16px 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            display: none;
            animation: slideIn 0.3s ease;
            border-left: 5px solid;
        }
        
        @keyframes slideIn {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .alert-success {
            background: #d4edda;
            border-color: var(--success);
            color: #155724;
        }
        
        .alert-error {
            background: #f8d7da;
            border-color: var(--danger);
            color: #721c24;
        }
        
        .alert-warning {
            background: #fff3cd;
            border-color: var(--warning);
            color: #856404;
        }
        
        /* ===== ESTAT√çSTICAS ===== */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 35px;
        }
        
        .stat-card {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            transition: transform 0.3s ease;
            border-top: 4px solid;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-card.blue { border-color: var(--primary); }
        .stat-card.green { border-color: var(--success); }
        .stat-card.orange { border-color: var(--warning); }
        .stat-card.red { border-color: var(--danger); }
        .stat-card.purple { border-color: #9b59b6; }
        
        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .stat-title {
            color: var(--gray);
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            color: white;
        }
        
        .stat-icon.blue { background: var(--primary); }
        .stat-icon.green { background: var(--success); }
        .stat-icon.orange { background: var(--warning); }
        .stat-icon.red { background: var(--danger); }
        
        .stat-value {
            font-size: 32px;
            font-weight: 800;
            margin-bottom: 5px;
        }
        
        .stat-change {
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .stat-change.positive { color: var(--success); }
        .stat-change.negative { color: var(--danger); }
        
        /* ===== GR√ÅFICOS ===== */
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 25px;
            margin-bottom: 35px;
        }
        
        .chart-container {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
        }
        
        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .chart-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--dark);
        }
        
        .chart-wrapper {
            position: relative;
            height: 300px;
        }
        
        /* ===== TABELAS ===== */
        .table-container {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            margin-bottom: 30px;
            overflow-x: auto;
        }
        
        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .table-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th {
            text-align: left;
            padding: 16px;
            background: var(--hover);
            color: var(--dark);
            font-weight: 600;
            border-bottom: 2px solid rgba(0,0,0,0.1);
        }
        
        td {
            padding: 16px;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }
        
        tr:hover {
            background: var(--hover);
        }
        
        .badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .badge.success { background: #d4edda; color: #155724; }
        .badge.warning { background: #fff3cd; color: #856404; }
        .badge.danger { background: #f8d7da; color: #721c24; }
        .badge.info { background: #d1ecf1; color: #0c5460; }
        
        /* ===== FORMUL√ÅRIOS ===== */
        .form-section {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            margin-bottom: 30px;
        }
        
        .form-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 25px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--hover);
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .form-group {
            margin-bottom: 5px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: var(--dark);
            font-weight: 600;
            font-size: 14px;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 14px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 15px;
            transition: all 0.3s ease;
            background: var(--card-bg);
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }
        
        .input-group {
            display: flex;
            gap: 15px;
        }
        
        .input-icon {
            position: relative;
        }
        
        .input-icon i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
        }
        
        .input-icon input {
            padding-left: 45px;
        }
        
        /* ===== P√ÅGINAS ===== */
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* ===== LOADING ===== */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 50px;
            color: var(--gray);
        }
        
        .loading i {
            font-size: 24px;
            margin-right: 10px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* ===== RESPONSIVO ===== */
        @media (max-width: 1200px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 992px) {
            .app-container {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                height: auto;
                position: relative;
                padding: 20px;
            }
            
            .nav-menu {
                flex-direction: row;
                flex-wrap: wrap;
            }
            
            .nav-item {
                flex: 1;
                min-width: 140px;
                justify-content: center;
            }
        }
        
        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .charts-grid {
                grid-template-columns: 1fr;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
            
            .user-actions {
                width: 100%;
                justify-content: space-between;
            }
        }
        
        /* ===== ANIMA√á√ïES ===== */
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(67, 97, 238, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(67, 97, 238, 0); }
            100% { box-shadow: 0 0 0 0 rgba(67, 97, 238, 0); }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- SIDEBAR -->
        <div class="sidebar">
            <div class="logo">
                <i class="fas fa-chart-line"></i>
                <span>Vendas PRO</span>
            </div>
            
            <div class="nav-menu">
                <div class="nav-item active" onclick="showPage('dashboard')">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </div>
                <div class="nav-item" onclick="showPage('produtos')">
                    <i class="fas fa-boxes"></i>
                    <span>Produtos</span>
                </div>
                <div class="nav-item" onclick="showPage('vendas')">
                    <i class="fas fa-shopping-cart"></i>
                    <span>Vendas</span>
                </div>
                <div class="nav-item" onclick="showPage('estoque')">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>Alerta Estoque</span>
                </div>
                <div class="nav-item" onclick="showPage('relatorios')">
                    <i class="fas fa-chart-pie"></i>
                    <span>Relat√≥rios</span>
                </div>
                <div class="nav-item" onclick="sincronizarDados()">
                    <i class="fas fa-sync-alt"></i>
                    <span>Sincronizar</span>
                </div>
            </div>
            
            <div style="margin-top: auto; padding-top: 30px; border-top: 1px solid rgba(255,255,255,0.1);">
                <div style="color: rgba(255,255,255,0.7); font-size: 12px; margin-bottom: 10px;">
                    Status do Sistema
                </div>
                <div id="systemStatus" style="display: flex; align-items: center; gap: 10px;">
                    <div style="width: 10px; height: 10px; border-radius: 50%; background: var(--success);"></div>
                    <span>Conectado</span>
                </div>
            </div>
        </div>

        <!-- CONTE√öDO PRINCIPAL -->
        <div class="main-content">
            <!-- HEADER -->
            <div class="header">
                <h1 class="page-title" id="pageTitle">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </h1>
                
                <div class="user-actions">
                    <div style="background: var(--light); padding: 8px 15px; border-radius: 20px; font-weight: 600;">
                        <i class="fas fa-user"></i>
                        <span>Administrador</span>
                    </div>
                    <button class="btn btn-outline" onclick="exportarDados()">
                        <i class="fas fa-download"></i>
                        Exportar
                    </button>
                    <button class="btn btn-primary pulse" onclick="registrarVendaRapida()">
                        <i class="fas fa-bolt"></i>
                        Venda R√°pida
                    </button>
                </div>
            </div>

            <!-- ALERTAS -->
            <div class="alert alert-success" id="alertSuccess">
                <i class="fas fa-check-circle"></i>
                <span id="alertSuccessText">Opera√ß√£o realizada com sucesso!</span>
            </div>
            
            <div class="alert alert-error" id="alertError">
                <i class="fas fa-exclamation-circle"></i>
                <span id="alertErrorText">Erro ao realizar opera√ß√£o!</span>
            </div>
            
            <div class="alert alert-warning" id="alertWarning">
                <i class="fas fa-exclamation-triangle"></i>
                <span id="alertWarningText">Aten√ß√£o: Produtos com estoque baixo!</span>
            </div>

            <!-- P√ÅGINA: DASHBOARD -->
            <div class="page active" id="pageDashboard">
                <!-- CARDS DE ESTAT√çSTICAS -->
                <div class="stats-grid">
                    <div class="stat-card blue">
                        <div class="stat-header">
                            <div class="stat-title">Faturamento Hoje</div>
                            <div class="stat-icon blue">
                                <i class="fas fa-dollar-sign"></i>
                            </div>
                        </div>
                        <div class="stat-value" id="faturamentoHoje">R$ 0,00</div>
                        <div class="stat-change positive">
                            <i class="fas fa-arrow-up"></i>
                            <span>+12% vs ontem</span>
                        </div>
                    </div>
                    
                    <div class="stat-card green">
                        <div class="stat-header">
                            <div class="stat-title">Vendas Hoje</div>
                            <div class="stat-icon green">
                                <i class="fas fa-shopping-cart"></i>
                            </div>
                        </div>
                        <div class="stat-value" id="vendasHoje">0</div>
                        <div class="stat-change positive">
                            <i class="fas fa-arrow-up"></i>
                            <span>+5% vs ontem</span>
                        </div>
                    </div>
                    
                    <div class="stat-card orange">
                        <div class="stat-header">
                            <div class="stat-title">Ticket M√©dio</div>
                            <div class="stat-icon orange">
                                <i class="fas fa-receipt"></i>
                            </div>
                        </div>
                        <div class="stat-value" id="ticketMedio">R$ 0,00</div>
                        <div class="stat-change negative">
                            <i class="fas fa-arrow-down"></i>
                            <span>-3% vs ontem</span>
                        </div>
                    </div>
                    
                    <div class="stat-card red">
                        <div class="stat-header">
                            <div class="stat-title">Lucro Hoje</div>
                            <div class="stat-icon red">
                                <i class="fas fa-chart-line"></i>
                            </div>
                        </div>
                        <div class="stat-value" id="lucroHoje">R$ 0,00</div>
                        <div class="stat-change positive">
                            <i class="fas fa-arrow-up"></i>
                            <span>+18% vs ontem</span>
                        </div>
                    </div>
                </div>

                <!-- GR√ÅFICOS -->
                <div class="charts-grid">
                    <div class="chart-container">
                        <div class="chart-header">
                            <div class="chart-title">
                                <i class="fas fa-chart-bar"></i>
                                Vendas por Per√≠odo
                            </div>
                            <div>
                                <select id="periodoChart" onchange="atualizarGraficoVendas()" style="padding: 8px 12px; border-radius: 6px; border: 1px solid #ddd;">
                                    <option value="dia">Hoje</option>
                                    <option value="semana">Esta Semana</option>
                                    <option value="mes">Este M√™s</option>
                                </select>
                            </div>
                        </div>
                        <div class="chart-wrapper">
                            <canvas id="vendasChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <div class="chart-header">
                            <div class="chart-title">
                                <i class="fas fa-chart-pie"></i>
                                Produtos Mais Vendidos
                            </div>
                        </div>
                        <div class="chart-wrapper">
                            <canvas id="produtosChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- RESUMO DO DIA -->
                <div class="table-container">
                    <div class="table-header">
                        <div class="table-title">
                            <i class="fas fa-list"></i>
                            Resumo do Dia
                        </div>
                        <div style="display: flex; gap: 10px;">
                            <span style="color: var(--success);">
                                <i class="fas fa-check-circle"></i>
                                <span id="vendasConcluidas">0</span> conclu√≠das
                            </span>
                            <span style="color: var(--danger);">
                                <i class="fas fa-times-circle"></i>
                                <span id="estoqueCritico">0</span> estoque cr√≠tico
                            </span>
                        </div>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                        <div style="background: var(--hover); padding: 20px; border-radius: 10px;">
                            <div style="color: var(--gray); margin-bottom: 10px;">Produto do Dia</div>
                            <div style="font-size: 18px; font-weight: 700;" id="produtoMaisVendido">Carregando...</div>
                            <div style="color: var(--success); font-size: 14px;">
                                <i class="fas fa-arrow-up"></i>
                                <span id="vendasProdutoDia">0</span> unidades
                            </div>
                        </div>
                        
                        <div style="background: var(--hover); padding: 20px; border-radius: 10px;">
                            <div style="color: var(--gray); margin-bottom: 10px;">Melhor Per√≠odo</div>
                            <div style="font-size: 18px; font-weight: 700;" id="melhorPeriodo">Carregando...</div>
                            <div style="color: var(--primary); font-size: 14px;">
                                <i class="fas fa-clock"></i>
                                <span id="horarioPico">--:--</span>
                            </div>
                        </div>
                        
                        <div style="background: var(--hover); padding: 20px; border-radius: 10px;">
                            <div style="color: var(--gray); margin-bottom: 10px;">Meta do Dia</div>
                            <div style="font-size: 18px; font-weight: 700;">R$ <span id="metaDia">1000</span></div>
                            <div style="margin-top: 10px;">
                                <div style="height: 8px; background: #e0e0e0; border-radius: 4px; overflow: hidden;">
                                    <div id="progressoMeta" style="height: 100%; background: var(--success); width: 0%;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- P√ÅGINA: PRODUTOS -->
            <div class="page" id="pageProdutos">
                <!-- CADASTRO R√ÅPIDO -->
                <div class="form-section">
                    <div class="form-title">
                        <i class="fas fa-plus-circle"></i>
                        Cadastro de Produto
                    </div>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="produtoNome">
                                <i class="fas fa-tag"></i>
                                Nome do Produto
                            </label>
                            <input type="text" id="produtoNome" placeholder="Ex: Pizza Grande">
                        </div>
                        
                        <div class="form-group">
                            <label for="produtoDescricao">
                                <i class="fas fa-align-left"></i>
                                Descri√ß√£o
                            </label>
                            <input type="text" id="produtoDescricao" placeholder="Descri√ß√£o breve do produto">
                        </div>
                        
                        <div class="form-group">
                            <label for="produtoQuantidade">
                                <i class="fas fa-box"></i>
                                Estoque Inicial
                            </label>
                            <input type="number" id="produtoQuantidade" value="0" min="0">
                        </div>
                    </div>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="produtoPrecoVenda">
                                <i class="fas fa-money-bill-wave"></i>
                                Pre√ßo de Venda (R$)
                            </label>
                            <input type="number" step="0.01" id="produtoPrecoVenda" placeholder="0,00">
                        </div>
                        
                        <div class="form-group">
                            <label for="produtoPrecoCusto">
                                <i class="fas fa-money-bill"></i>
                                Pre√ßo de Custo (R$)
                            </label>
                            <input type="number" step="0.01" id="produtoPrecoCusto" placeholder="0,00">
                        </div>
                        
                        <div class="form-group">
                            <label for="produtoEstoqueMin">
                                <i class="fas fa-exclamation-triangle"></i>
                                Estoque M√≠nimo
                            </label>
                            <input type="number" id="produtoEstoqueMin" value="10" min="0">
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 15px; margin-top: 20px;">
                        <button class="btn btn-success" onclick="cadastrarProduto()">
                            <i class="fas fa-save"></i>
                            Salvar Produto
                        </button>
                        <button class="btn btn-outline" onclick="limparFormProduto()">
                            <i class="fas fa-broom"></i>
                            Limpar
                        </button>
                        <button class="btn btn-primary" onclick="importarProdutos()">
                            <i class="fas fa-file-import"></i>
                            Importar CSV
                        </button>
                    </div>
                </div>

                <!-- LISTA DE PRODUTOS -->
                <div class="table-container">
                    <div class="table-header">
                        <div class="table-title">
                            <i class="fas fa-boxes"></i>
                            Todos os Produtos (<span id="totalProdutosCount">0</span>)
                        </div>
                        <div class="input-icon" style="width: 300px;">
                            <i class="fas fa-search"></i>
                            <input type="text" id="buscarProduto" placeholder="Buscar produto..." 
                                   onkeyup="filtrarProdutos(this.value)">
                        </div>
                    </div>
                    
                    <div class="loading" id="loadingProdutos">
                        <i class="fas fa-spinner"></i>
                        <span>Carregando produtos...</span>
                    </div>
                    
                    <table id="tableProdutos" style="display: none;">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Produto</th>
                                <th>Estoque</th>
                                <th>Pre√ßo Venda</th>
                                <th>Pre√ßo Custo</th>
                                <th>Lucro</th>
                                <th>Status</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="tbodyProdutos">
                            <!-- Dados carregados via JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- P√ÅGINA: VENDAS -->
            <div class="page" id="pageVendas">
                <!-- REGISTRO DE VENDA -->
                <div class="form-section">
                    <div class="form-title">
                        <i class="fas fa-cash-register"></i>
                        Registrar Nova Venda
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 30px;">
                        <div>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="vendaProduto">
                                        <i class="fas fa-search"></i>
                                        Buscar Produto
                                    </label>
                                    <div class="input-icon">
                                        <i class="fas fa-search"></i>
                                        <input type="text" id="buscarProdutoVenda" 
                                               placeholder="Digite nome do produto..."
                                               onkeyup="buscarProdutoVenda(this.value)">
                                    </div>
                                    <div id="sugestoesProdutos" style="margin-top: 10px; display: none;">
                                        <!-- Sugest√µes aparecem aqui -->
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="vendaProdutoSelecionado">
                                        <i class="fas fa-box"></i>
                                        Produto Selecionado
                                    </label>
                                    <input type="text" id="vendaProdutoSelecionado" readonly 
                                           style="background: var(--hover);">
                                    <input type="hidden" id="vendaProdutoId">
                                </div>
                                
                                <div class="form-group">
                                    <label for="vendaQuantidade">
                                        <i class="fas fa-hashtag"></i>
                                        Quantidade
                                    </label>
                                    <div style="display: flex; gap: 10px;">
                                        <button class="btn" onclick="alterarQuantidade(-1)" 
                                                style="padding: 10px 15px;">
                                            <i class="fas fa-minus"></i>
                                        </button>
                                        <input type="number" id="vendaQuantidade" value="1" min="1" 
                                               style="text-align: center;" onchange="calcularVenda()">
                                        <button class="btn" onclick="alterarQuantidade(1)" 
                                                style="padding: 10px 15px;">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                    </div>
                                    <div style="font-size: 12px; color: var(--gray); margin-top: 5px;">
                                        Estoque dispon√≠vel: <span id="estoqueDisponivel">0</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="vendaPrecoUnitario">
                                        <i class="fas fa-tag"></i>
                                        Pre√ßo Unit√°rio
                                    </label>
                                    <input type="text" id="vendaPrecoUnitario" readonly 
                                           style="background: var(--hover); font-size: 18px; font-weight: bold;">
                                </div>
                                
                                <div class="form-group">
                                    <label for="vendaFormaPagamento">
                                        <i class="fas fa-credit-card"></i>
                                        Forma de Pagamento
                                    </label>
                                    <select id="vendaFormaPagamento">
                                        <option value="dinheiro">üíµ Dinheiro</option>
                                        <option value="cartao">üí≥ Cart√£o</option>
                                        <option value="pix">üì± PIX</option>
                                        <option value="debito">üí≥ D√©bito</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div style="background: linear-gradient(135deg, var(--primary), var(--secondary)); 
                                    padding: 30px; border-radius: 15px; color: white; display: flex; 
                                    flex-direction: column; justify-content: center;">
                            <div style="text-align: center; margin-bottom: 30px;">
                                <div style="font-size: 14px; opacity: 0.9;">TOTAL DA VENDA</div>
                                <div id="vendaTotalDisplay" style="font-size: 48px; font-weight: 800; margin: 10px 0;">
                                    R$ 0,00
                                </div>
                                <div style="font-size: 14px; opacity: 0.9;">
                                    <span id="vendaItensCount">0</span> itens
                                </div>
                            </div>
                            
                            <div style="margin-bottom: 25px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                    <span>Subtotal</span>
                                    <span id="vendaSubtotal">R$ 0,00</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                    <span>Desconto</span>
                                    <span id="vendaDesconto">R$ 0,00</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; font-weight: bold; 
                                            border-top: 1px solid rgba(255,255,255,0.3); padding-top: 10px;">
                                    <span>TOTAL</span>
                                    <span id="vendaTotal">R$ 0,00</span>
                                </div>
                            </div>
                            
                            <button class="btn" onclick="registrarVenda()" 
                                    style="background: white; color: var(--primary); font-weight: 700; 
                                           padding: 16px; font-size: 16px;">
                                <i class="fas fa-check-circle"></i>
                                FINALIZAR VENDA
                            </button>
                        </div>
                    </div>
                </div>

                <!-- HIST√ìRICO DE VENDAS -->
                <div class="table-container">
                    <div class="table-header">
                        <div class="table-title">
                            <i class="fas fa-history"></i>
                            Hist√≥rico de Vendas
                        </div>
                        <div style="display: flex; gap: 10px;">
                            <select id="filtroVendas" onchange="filtrarVendas()" 
                                    style="padding: 8px 12px; border-radius: 6px; border: 1px solid #ddd;">
                                <option value="hoje">Hoje</option>
                                <option value="semana">Esta Semana</option>
                                <option value="mes">Este M√™s</option>
                                <option value="todos">Todos</option>
                            </select>
                            <button class="btn btn-primary" onclick="carregarVendas()">
                                <i class="fas fa-sync-alt"></i>
                                Atualizar
                            </button>
                        </div>
                    </div>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Data/Hora</th>
                                <th>Produto</th>
                                <th>Qtd</th>
                                <th>Valor Unit.</th>
                                <th>Total</th>
                                <th>Pagamento</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="tableVendas">
                            <tr>
                                <td colspan="8" style="text-align: center; padding: 30px; color: var(--gray);">
                                    <i class="fas fa-shopping-cart" style="font-size: 48px; margin-bottom: 15px; opacity: 0.3;"></i>
                                    <div>Nenhuma venda registrada</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- P√ÅGINA: ALERTA ESTOQUE -->
            <div class="page" id="pageEstoque">
                <!-- ALERTAS CR√çTICOS -->
                <div class="table-container">
                    <div class="table-header">
                        <div class="table-title">
                            <i class="fas fa-exclamation-triangle" style="color: var(--danger);"></i>
                            Produtos com Estoque Cr√≠tico
                        </div>
                        <button class="btn btn-warning" onclick="gerarPedidoCompra()">
                            <i class="fas fa-truck"></i>
                            Gerar Pedido de Compra
                        </button>
                    </div>
                    
                    <div id="alertasEstoque">
                        <!-- Alertas carregados via JavaScript -->
                    </div>
                </div>

                <!-- CONTROLE DE ESTOQUE -->
                <div class="form-section">
                    <div class="form-title">
                        <i class="fas fa-edit"></i>
                        Ajuste de Estoque
                    </div>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="ajusteProduto">
                                <i class="fas fa-box"></i>
                                Produto
                            </label>
                            <select id="ajusteProduto" onchange="carregarInfoEstoque()">
                                <option value="">Selecione um produto</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="ajusteTipo">
                                <i class="fas fa-exchange-alt"></i>
                                Tipo de Ajuste
                            </label>
                            <select id="ajusteTipo" onchange="toggleMotivo()">
                                <option value="entrada">Entrada (+)</option>
                                <option value="saida">Sa√≠da (-)</option>
                                <option value="correcao">Corre√ß√£o</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="ajusteQuantidade">
                                <i class="fas fa-hashtag"></i>
                                Quantidade
                            </label>
                            <input type="number" id="ajusteQuantidade" value="0" min="0">
                        </div>
                    </div>
                    
                    <div class="form-group" id="motivoAjusteGroup" style="display: none;">
                        <label for="ajusteMotivo">
                            <i class="fas fa-comment"></i>
                            Motivo do Ajuste
                        </label>
                        <textarea id="ajusteMotivo" rows="3" placeholder="Descreva o motivo do ajuste..."></textarea>
                    </div>
                    
                    <div style="display: flex; gap: 15px; margin-top: 20px;">
                        <button class="btn btn-success" onclick="aplicarAjusteEstoque()">
                            <i class="fas fa-check"></i>
                            Aplicar Ajuste
                        </button>
                        <button class="btn btn-outline" onclick="gerarRelatorioEstoque()">
                            <i class="fas fa-file-pdf"></i>
                            Relat√≥rio de Estoque
                        </button>
                    </div>
                </div>
            </div>

            <!-- P√ÅGINA: RELAT√ìRIOS -->
            <div class="page" id="pageRelatorios">
                <!-- FILTROS DE RELAT√ìRIO -->
                <div class="form-section">
                    <div class="form-title">
                        <i class="fas fa-chart-bar"></i>
                        Gerar Relat√≥rio
                    </div>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="relatorioTipo">
                                <i class="fas fa-chart-line"></i>
                                Tipo de Relat√≥rio
                            </label>
                            <select id="relatorioTipo" onchange="mostrarFiltrosRelatorio()">
                                <option value="">Selecione um relat√≥rio</option>
                                <option value="vendas">üìä Vendas por Per√≠odo</option>
                                <option value="produtos">üèÜ Produtos Mais Vendidos</option>
                                <option value="lucro">üí∞ An√°lise de Lucro</option>
                                <option value="estoque">üì¶ Movimenta√ß√£o de Estoque</option>
                                <option value="comparativo">üìà Comparativo Peri√≥dico</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="relatorioPeriodo">
                                <i class="fas fa-calendar"></i>
                                Per√≠odo
                            </label>
                            <select id="relatorioPeriodo">
                                <option value="hoje">Hoje</option>
                                <option value="ontem">Ontem</option>
                                <option value="semana">Esta Semana</option>
                                <option value="mes">Este M√™s</option>
                                <option value="trimestre">Este Trimestre</option>
                                <option value="ano">Este Ano</option>
                                <option value="personalizado">Personalizado</option>
                            </select>
                        </div>
                        
                        <div class="form-group" id="dataPersonalizadaGroup" style="display: none;">
                            <label>Datas Personalizadas</label>
                            <div style="display: flex; gap: 10px;">
                                <input type="date" id="dataInicio" style="flex: 1;">
                                <input type="date" id="dataFim" style="flex: 1;">
                            </div>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 15px; margin-top: 20px;">
                        <button class="btn btn-primary" onclick="gerarRelatorio()">
                            <i class="fas fa-chart-bar"></i>
                            Gerar Relat√≥rio
                        </button>
                        <button class="btn btn-success" onclick="exportarRelatorioPDF()">
                            <i class="fas fa-file-pdf"></i>
                            Exportar PDF
                        </button>
                        <button class="btn btn-outline" onclick="exportarRelatorioExcel()">
                            <i class="fas fa-file-excel"></i>
                            Exportar Excel
                        </button>
                    </div>
                </div>

                <!-- RESULTADO DO RELAT√ìRIO -->
                <div class="table-container" id="relatorioResultado" style="display: none;">
                    <div class="table-header">
                        <div class="table-title" id="relatorioTitulo">
                            Relat√≥rio Gerado
                        </div>
                        <div style="color: var(--gray);">
                            <i class="fas fa-calendar"></i>
                            <span id="relatorioPeriodoTexto">Per√≠odo</span>
                        </div>
                    </div>
                    
                    <div id="relatorioConteudo">
                        <!-- Conte√∫do do relat√≥rio ser√° injetado aqui -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL VENDA R√ÅPIDA -->
    <div id="modalVendaRapida" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
         background: rgba(0,0,0,0.8); z-index: 1000; justify-content: center; align-items: center;">
        <div style="background: white; width: 90%; max-width: 500px; border-radius: 15px; padding: 30px;">
            <h2 style="margin-bottom: 20px;">
                <i class="fas fa-bolt"></i>
                Venda R√°pida
            </h2>
            
            <div class="form-group">
                <label>C√≥digo do Produto</label>
                <input type="text" id="codigoRapido" placeholder="Digite o c√≥digo ou nome" 
                       style="font-size: 18px; padding: 15px;" autofocus>
            </div>
            
            <div style="margin-top: 20px; display: flex; gap: 15px;">
                <button class="btn btn-success" onclick="processarVendaRapida()" style="flex: 1;">
                    <i class="fas fa-check"></i>
                    Confirmar
                </button>
                <button class="btn btn-danger" onclick="fecharModalVendaRapida()" style="flex: 1;">
                    <i class="fas fa-times"></i>
                    Cancelar
                </button>
            </div>
        </div>
    </div>

    <!-- ============================================
         JAVASCRIPT DO SISTEMA
    ============================================ -->
    <script>
        // ================= CONFIGURA√á√ÉO =================
        const CONFIG = {
            API_URL: 'https://seusite.vercel.app/api', // SUA URL DO VERCEL
            MODO_DEMO: false, // false para usar API real
            
            // URLs das APIs
            ENDPOINTS: {
                PRODUTOS: '/produtos',
                VENDAS: '/vendas',
                DASHBOARD: '/dashboard'
            }
        };

        // ================= VARI√ÅVEIS GLOBAIS =================
        let produtos = [];
        let vendas = [];
        let chartVendas = null;
        let chartProdutos = null;
        let carrinhoVenda = [];

        // ================= INICIALIZA√á√ÉO =================
        document.addEventListener('DOMContentLoaded', function() {
            // Configura listeners
            document.getElementById('relatorioPeriodo').addEventListener('change', toggleDatasPersonalizadas);
            
            // Carrega dados iniciais
            if (CONFIG.MODO_DEMO) {
                inicializarDemo();
            } else {
                carregarDashboard();
                carregarProdutos();
                carregarVendas();
            }
            
            // Atualiza hora atual
            atualizarHora();
            setInterval(atualizarHora, 60000);
            
            // Configura eventos do teclado
            document.addEventListener('keydown', function(e) {
                // F2 para venda r√°pida
                if (e.key === 'F2' || (e.ctrlKey && e.key === 'n')) {
                    registrarVendaRapida();
                    e.preventDefault();
                }
                
                // ESC para fechar modal
                if (e.key === 'Escape') {
                    fecharModalVendaRapida();
                }
            });
        });

        // ================= FUN√á√ïES DE NAVEGA√á√ÉO =================
        function showPage(pageId) {
            // Esconde todas as p√°ginas
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Remove active de todos os itens do menu
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Mostra a p√°gina solicitada
            document.getElementById(`page${pageId.charAt(0).toUpperCase() + pageId.slice(1)}`).classList.add('active');
            
            // Ativa item do menu correspondente
            document.querySelectorAll('.nav-item').forEach(item => {
                if (item.textContent.includes(getPageTitle(pageId))) {
                    item.classList.add('active');
                }
            });
            
            // Atualiza t√≠tulo da p√°gina
            const pageTitle = document.getElementById('pageTitle');
            pageTitle.innerHTML = `<i class="fas fa-${getPageIcon(pageId)}"></i><span>${getPageTitle(pageId)}</span>`;
            
            // Carrega dados espec√≠ficos da p√°gina
            switch(pageId) {
                case 'dashboard':
                    carregarDashboard();
                    break;
                case 'produtos':
                    carregarProdutos();
                    break;
                case 'vendas':
                    carregarVendas();
                    break;
                case 'estoque':
                    carregarAlertasEstoque();
                    carregarProdutosParaAjuste();
                    break;
            }
        }
        
        function getPageTitle(pageId) {
            const titles = {
                'dashboard': 'Dashboard',
                'produtos': 'Produtos',
                'vendas': 'Vendas',
                'estoque': 'Alerta Estoque',
                'relatorios': 'Relat√≥rios'
            };
            return titles[pageId] || 'Dashboard';
        }
        
        function getPageIcon(pageId) {
            const icons = {
                'dashboard': 'home',
                'produtos': 'boxes',
                'vendas': 'shopping-cart',
                'estoque': 'exclamation-triangle',
                'relatorios': 'chart-pie'
            };
            return icons[pageId] || 'home';
        }

        // ================= FUN√á√ïES DE ALERTAS =================
        function showAlert(type, message, duration = 3000) {
            const alert = document.getElementById(`alert${type.charAt(0).toUpperCase() + type.slice(1)}`);
            const alertText = document.getElementById(`alert${type.charAt(0).toUpperCase() + type.slice(1)}Text`);
            
            alertText.textContent = message;
            alert.style.display = 'block';
            
            setTimeout(() => {
                alert.style.display = 'none';
            }, duration);
        }

        // ================= DASHBOARD =================
        async function carregarDashboard() {
            if (CONFIG.MODO_DEMO) {
                // Dados de demonstra√ß√£o
                atualizarCardsDashboard({
                    vendas_hoje: 15,
                    faturamento_hoje: 1250.75,
                    total_estoque: 450,
                    baixo_estoque: [
                        { nome: 'Pizza Grande', quantidade: 8 },
                        { nome: 'Refri 2L', quantidade: 12 }
                    ],
                    ultimas_vendas: vendas.slice(0, 5)
                });
            } else {
                try {
                    const response = await fetch(`${CONFIG.API_URL}${CONFIG.ENDPOINTS.DASHBOARD}`);
                    if (!response.ok) throw new Error('Erro ao carregar dashboard');
                    
                    const data = await response.json();
                    atualizarCardsDashboard(data);
                    criarGraficos(data);
                } catch (error) {
                    console.error('Erro ao carregar dashboard:', error);
                    showAlert('error', 'Erro ao carregar dashboard');
                }
            }
        }
        
        function atualizarCardsDashboard(data) {
            // Atualiza cards principais
            document.getElementById('faturamentoHoje').textContent = 
                `R$ ${(data.faturamento_hoje || 0).toFixed(2)}`;
            document.getElementById('vendasHoje').textContent = data.vendas_hoje || 0;
            document.getElementById('ticketMedio').textContent = 
                `R$ ${((data.faturamento_hoje || 0) / (data.vendas_hoje || 1)).toFixed(2)}`;
            document.getElementById('lucroHoje').textContent = 
                `R$ ${((data.faturamento_hoje || 0) * 0.4).toFixed(2)}`;
            
            // Atualiza resumo
            document.getElementById('vendasConcluidas').textContent = data.vendas_hoje || 0;
            document.getElementById('estoqueCritico').textContent = (data.baixo_estoque || []).length;
            
            // Atualiza progresso da meta
            const meta = 1000;
            const progresso = ((data.faturamento_hoje || 0) / meta) * 100;
            document.getElementById('progressoMeta').style.width = `${Math.min(progresso, 100)}%`;
            
            // Produto mais vendido
            if (data.ultimas_vendas && data.ultimas_vendas.length > 0) {
                document.getElementById('produtoMaisVendido').textContent = 
                    data.ultimas_vendas[0].produto_nome || 'N/A';
            }
        }
        
        function criarGraficos(data) {
            // Gr√°fico de vendas
            const ctxVendas = document.getElementById('vendasChart').getContext('2d');
            if (chartVendas) chartVendas.destroy();
            
            chartVendas = new Chart(ctxVendas, {
                type: 'line',
                data: {
                    labels: ['Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'S√°b', 'Dom'],
                    datasets: [{
                        label: 'Vendas (R$)',
                        data: [1200, 1900, 1500, 2100, 1800, 2500, 2200],
                        borderColor: '#4361ee',
                        backgroundColor: 'rgba(67, 97, 238, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    }
                }
            });
            
            // Gr√°fico de produtos
            const ctxProdutos = document.getElementById('produtosChart').getContext('2d');
            if (chartProdutos) chartProdutos.destroy();
            
            chartProdutos = new Chart(ctxProdutos, {
                type: 'doughnut',
                data: {
                    labels: ['Pizza', 'Refri', 'Esfiha', 'Bebida', 'Outros'],
                    datasets: [{
                        data: [40, 25, 20, 10, 5],
                        backgroundColor: [
                            '#4361ee', '#3a0ca3', '#7209b7', '#f72585', '#4cc9f0'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right'
                        }
                    }
                }
            });
        }
        
        function atualizarGraficoVendas() {
            // Implementar atualiza√ß√£o do gr√°fico baseado no per√≠odo selecionado
            showAlert('success', 'Gr√°fico atualizado');
        }

        // ================= PRODUTOS =================
        async function carregarProdutos() {
            if (CONFIG.MODO_DEMO) {
                // Simula carregamento
                setTimeout(() => {
                    produtos = [
                        { id: 1, nome: "Pizza Grande", descricao: "Pizza 8 peda√ßos", quantidade: 50, valor_venda: 45.00, valor_aquisicao: 20.00 },
                        { id: 2, nome: "Refri 2L", descricao: "Coca-Cola 2 litros", quantidade: 100, valor_venda: 10.00, valor_aquisicao: 6.00 },
                        { id: 3, nome: "Esfiha", descricao: "Esfiha de carne", quantidade: 200, valor_venda: 5.00, valor_aquisicao: 2.00 }
                    ];
                    renderizarProdutos(produtos);
                }, 500);
            } else {
                try {
                    document.getElementById('loadingProdutos').style.display = 'flex';
                    document.getElementById('tableProdutos').style.display = 'none';
                    
                    const response = await fetch(`${CONFIG.API_URL}${CONFIG.ENDPOINTS.PRODUTOS}`);
                    if (!response.ok) throw new Error('Erro ao carregar produtos');
                    
                    produtos = await response.json();
                    renderizarProdutos(produtos);
                    
                } catch (error) {
                    console.error('Erro ao carregar produtos:', error);
                    showAlert('error', 'Erro ao carregar produtos');
                } finally {
                    document.getElementById('loadingProdutos').style.display = 'none';
                    document.getElementById('tableProdutos').style.display = 'table';
                }
            }
        }
        
        function renderizarProdutos(listaProdutos) {
            const tbody = document.getElementById('tbodyProdutos');
            const totalProdutos = document.getElementById('totalProdutosCount');
            
            if (!listaProdutos || listaProdutos.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="8" style="text-align: center; padding: 30px; color: var(--gray);">
                            <i class="fas fa-box-open" style="font-size: 48px; margin-bottom: 15px; opacity: 0.3;"></i>
                            <div>Nenhum produto cadastrado</div>
                        </td>
                    </tr>
                `;
                totalProdutos.textContent = '0';
                return;
            }
            
            tbody.innerHTML = listaProdutos.map(produto => {
                const lucro = produto.valor_venda - (produto.valor_aquisicao || 0);
                const margem = produto.valor_venda > 0 ? (lucro / produto.valor_venda * 100).toFixed(1) : 0;
                
                let status = 'success';
                let statusText = 'Normal';
                
                if (produto.quantidade < 10) {
                    status = 'danger';
                    statusText = 'Cr√≠tico';
                } else if (produto.quantidade < 30) {
                    status = 'warning';
                    statusText = 'Baixo';
                }
                
                return `
                    <tr>
                        <td>#${produto.id}</td>
                        <td>
                            <div style="font-weight: 600;">${produto.nome}</div>
                            <div style="font-size: 12px; color: var(--gray);">${produto.descricao || 'Sem descri√ß√£o'}</div>
                        </td>
                        <td>
                            <div style="font-weight: 700; color: ${
                                produto.quantidade < 10 ? 'var(--danger)' : 
                                produto.quantidade < 30 ? 'var(--warning)' : 'var(--success)'
                            };">${produto.quantidade}</div>
                        </td>
                        <td>R$ ${produto.valor_venda.toFixed(2)}</td>
                        <td>R$ ${(produto.valor_aquisicao || 0).toFixed(2)}</td>
                        <td>
                            <div>R$ ${lucro.toFixed(2)}</div>
                            <div style="font-size: 12px; color: var(--success);">${margem}%</div>
                        </td>
                        <td>
                            <span class="badge ${status}">${statusText}</span>
                        </td>
                        <td>
                            <div style="display: flex; gap: 8px;">
                                <button class="btn" onclick="editarProduto(${produto.id})" 
                                        style="padding: 6px 12px; background: var(--primary); color: white;">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn" onclick="excluirProduto(${produto.id})" 
                                        style="padding: 6px 12px; background: var(--danger); color: white;">
                                    <i class="fas fa-trash"></i>
                                </button>
                                <button class="btn" onclick="venderProduto(${produto.id})" 
                                        style="padding: 6px 12px; background: var(--success); color: white;">
                                    <i class="fas fa-cart-plus"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
            
            totalProdutos.textContent = listaProdutos.length;
        }
        
        async function cadastrarProduto() {
            const nome = document.getElementById('produtoNome').value.trim();
            const descricao = document.getElementById('produtoDescricao').value.trim();
            const quantidade = parseInt(document.getElementById('produtoQuantidade').value) || 0;
            const valor_venda = parseFloat(document.getElementById('produtoPrecoVenda').value) || 0;
            const valor_aquisicao = parseFloat(document.getElementById('produtoPrecoCusto').value) || 0;
            const estoque_min = parseInt(document.getElementById('produtoEstoqueMin').value) || 10;
            
            if (!nome || valor_venda <= 0) {
                showAlert('error', 'Preencha o nome e pre√ßo de venda corretamente!');
                return;
            }
            
            if (CONFIG.MODO_DEMO) {
                // Simula cadastro
                const novoId = produtos.length > 0 ? Math.max(...produtos.map(p => p.id)) + 1 : 1;
                const novoProduto = {
                    id: novoId,
                    nome,
                    descricao,
                    quantidade,
                    valor_venda,
                    valor_aquisicao,
                    estoque_min
                };
                produtos.push(novoProduto);
                renderizarProdutos(produtos);
                limparFormProduto();
                showAlert('success', `Produto "${nome}" cadastrado com sucesso!`);
            } else {
                try {
                    const response = await fetch(`${CONFIG.API_URL}${CONFIG.ENDPOINTS.PRODUTOS}`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            nome,
                            descricao,
                            quantidade,
                            valor_venda,
                            valor_aquisicao
                        })
                    });
                    
                    if (!response.ok) throw new Error('Erro ao cadastrar produto');
                    
                    const produtoCadastrado = await response.json();
                    showAlert('success', `Produto "${produtoCadastrado.nome}" cadastrado com sucesso!`);
                    limparFormProduto();
                    carregarProdutos();
                    carregarDashboard();
                    
                } catch (error) {
                    console.error('Erro ao cadastrar produto:', error);
                    showAlert('error', 'Erro ao cadastrar produto');
                }
            }
        }
        
        function limparFormProduto() {
            document.getElementById('produtoNome').value = '';
            document.getElementById('produtoDescricao').value = '';
            document.getElementById('produtoQuantidade').value = '0';
            document.getElementById('produtoPrecoVenda').value = '';
            document.getElementById('produtoPrecoCusto').value = '';
            document.getElementById('produtoEstoqueMin').value = '10';
        }
        
        function filtrarProdutos(termo) {
            const termoLower = termo.toLowerCase();
            const produtosFiltrados = produtos.filter(p => 
                p.nome.toLowerCase().includes(termoLower) || 
                (p.descricao && p.descricao.toLowerCase().includes(termoLower))
            );
            renderizarProdutos(produtosFiltrados);
        }
        
        function editarProduto(id) {
            const produto = produtos.find(p => p.id === id);
            if (produto) {
                document.getElementById('produtoNome').value = produto.nome;
                document.getElementById('produtoDescricao').value = produto.descricao || '';
                document.getElementById('produtoQuantidade').value = produto.quantidade;
                document.getElementById('produtoPrecoVenda').value = produto.valor_venda;
                document.getElementById('produtoPrecoCusto').value = produto.valor_aquisicao || 0;
                
                const btnSalvar = document.querySelector('#pageProdutos .btn-success');
                btnSalvar.innerHTML = '<i class="fas fa-sync-alt"></i> Atualizar Produto';
                btnSalvar.onclick = () => atualizarProduto(id);
                
                showAlert('warning', `Editando produto: ${produto.nome}`);
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }
        
        async function atualizarProduto(id) {
            // Implementar atualiza√ß√£o
            showAlert('info', 'Funcionalidade de atualiza√ß√£o em desenvolvimento');
        }
        
        async function excluirProduto(id) {
            if (!confirm('Tem certeza que deseja excluir este produto?')) return;
            
            if (CONFIG.MODO_DEMO) {
                produtos = produtos.filter(p => p.id !== id);
                renderizarProdutos(produtos);
                showAlert('success', 'Produto exclu√≠do com sucesso!');
            } else {
                try {
                    const response = await fetch(`${CONFIG.API_URL}${CONFIG.ENDPOINTS.PRODUTOS}?id=${id}`, {
                        method: 'DELETE'
                    });
                    
                    if (!response.ok) throw new Error('Erro ao excluir produto');
                    
                    showAlert('success', 'Produto exclu√≠do com sucesso!');
                    carregarProdutos();
                    
                } catch (error) {
                    console.error('Erro ao excluir produto:', error);
                    showAlert('error', 'Erro ao excluir produto');
                }
            }
        }

        // ================= VENDAS =================
        async function carregarVendas() {
            if (CONFIG.MODO_DEMO) {
                // Simula vendas
                vendas = [
                    { id: 1, produto_nome: "Pizza Grande", quantidade: 2, valor_unitario: 45.00, valor_total: 90.00, data_venda: new Date().toISOString() },
                    { id: 2, produto_nome: "Refri 2L", quantidade: 3, valor_unitario: 10.00, valor_total: 30.00, data_venda: new Date(Date.now() - 86400000).toISOString() }
                ];
                renderizarVendas(vendas);
            } else {
                try {
                    const response = await fetch(`${CONFIG.API_URL}${CONFIG.ENDPOINTS.VENDAS}`);
                    if (!response.ok) throw new Error('Erro ao carregar vendas');
                    
                    vendas = await response.json();
                    renderizarVendas(vendas);
                    
                } catch (error) {
                    console.error('Erro ao carregar vendas:', error);
                    showAlert('error', 'Erro ao carregar vendas');
                }
            }
        }
        
        function renderizarVendas(listaVendas) {
            const tbody = document.getElementById('tableVendas');
            
            if (!listaVendas || listaVendas.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="8" style="text-align: center; padding: 30px; color: var(--gray);">
                            <i class="fas fa-shopping-cart" style="font-size: 48px; margin-bottom: 15px; opacity: 0.3;"></i>
                            <div>Nenhuma venda registrada</div>
                        </td>
                    </tr>
                `;
                return;
            }
            
            tbody.innerHTML = listaVendas.map(venda => {
                const data = new Date(venda.data_venda);
                const dataFormatada = data.toLocaleDateString('pt-BR');
                const horaFormatada = data.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' });
                
                return `
                    <tr>
                        <td>#${venda.id}</td>
                        <td>
                            <div>${dataFormatada}</div>
                            <div style="font-size: 12px; color: var(--gray);">${horaFormatada}</div>
                        </td>
                        <td>${venda.produto_nome}</td>
                        <td>${venda.quantidade}</td>
                        <td>R$ ${venda.valor_unitario.toFixed(2)}</td>
                        <td style="font-weight: 700;">R$ ${venda.valor_total.toFixed(2)}</td>
                        <td>
                            <span class="badge info">
                                ${venda.forma_pagamento === 'dinheiro' ? 'üíµ Dinheiro' : 
                                  venda.forma_pagamento === 'cartao' ? 'üí≥ Cart√£o' : 
                                  venda.forma_pagamento === 'pix' ? 'üì± PIX' : 'üí≥ D√©bito'}
                            </span>
                        </td>
                        <td>
                            <button class="btn" onclick="verDetalhesVenda(${venda.id})" 
                                    style="padding: 6px 12px; background: var(--primary); color: white;">
                                <i class="fas fa-eye"></i>
                            </button>
                        </td>
                    </tr>
                `;
            }).join('');
        }
        
        function buscarProdutoVenda(termo) {
            if (termo.length < 2) {
                document.getElementById('sugestoesProdutos').style.display = 'none';
                return;
            }
            
            const termoLower = termo.toLowerCase();
            const resultados = produtos.filter(p => 
                p.nome.toLowerCase().includes(termoLower) && p.quantidade > 0
            ).slice(0, 5);
            
            const sugestoesDiv = document.getElementById('sugestoesProdutos');
            if (resultados.length > 0) {
                sugestoesDiv.innerHTML = resultados.map(produto => `
                    <div style="padding: 10px; border-bottom: 1px solid #eee; cursor: pointer;" 
                         onclick="selecionarProdutoVenda(${produto.id})">
                        <div style="font-weight: 600;">${produto.nome}</div>
                        <div style="font-size: 12px; color: var(--gray);">
                            Estoque: ${produto.quantidade} | R$ ${produto.valor_venda.toFixed(2)}
                        </div>
                    </div>
                `).join('');
                sugestoesDiv.style.display = 'block';
            } else {
                sugestoesDiv.style.display = 'none';
            }
        }
        
        function selecionarProdutoVenda(produtoId) {
            const produto = produtos.find(p => p.id === produtoId);
            if (!produto) return;
            
            document.getElementById('vendaProdutoId').value = produto.id;
            document.getElementById('vendaProdutoSelecionado').value = produto.nome;
            document.getElementById('vendaPrecoUnitario').value = `R$ ${produto.valor_venda.toFixed(2)}`;
            document.getElementById('estoqueDisponivel').textContent = produto.quantidade;
            document.getElementById('sugestoesProdutos').style.display = 'none';
            document.getElementById('buscarProdutoVenda').value = '';
            
            calcularVenda();
        }
        
        function alterarQuantidade(quantidade) {
            const input = document.getElementById('vendaQuantidade');
            let valor = parseInt(input.value) || 1;
            valor += quantidade;
            if (valor < 1) valor = 1;
            
            // Verifica estoque m√°ximo
            const produtoId = document.getElementById('vendaProdutoId').value;
            if (produtoId) {
                const produto = produtos.find(p => p.id == produtoId);
                if (produto && valor > produto.quantidade) {
                    valor = produto.quantidade;
                    showAlert('warning', `Estoque m√°ximo: ${produto.quantidade} unidades`);
                }
            }
            
            input.value = valor;
            calcularVenda();
        }
        
        function calcularVenda() {
            const produtoId = document.getElementById('vendaProdutoId').value;
            const quantidade = parseInt(document.getElementById('vendaQuantidade').value) || 1;
            
            if (!produtoId) {
                resetarCalculoVenda();
                return;
            }
            
            const produto = produtos.find(p => p.id == produtoId);
            if (!produto) {
                resetarCalculoVenda();
                return;
            }
            
            const subtotal = produto.valor_venda * quantidade;
            const total = subtotal;
            
            document.getElementById('vendaSubtotal').textContent = `R$ ${subtotal.toFixed(2)}`;
            document.getElementById('vendaTotal').textContent = `R$ ${total.toFixed(2)}`;
            document.getElementById('vendaTotalDisplay').textContent = `R$ ${total.toFixed(2)}`;
            document.getElementById('vendaItensCount').textContent = quantidade;
        }
        
        function resetarCalculoVenda() {
            document.getElementById('vendaSubtotal').textContent = 'R$ 0,00';
            document.getElementById('vendaTotal').textContent = 'R$ 0,00';
            document.getElementById('vendaTotalDisplay').textContent = 'R$ 0,00';
            document.getElementById('vendaItensCount').textContent = '0';
        }
        
        async function registrarVenda() {
            const produtoId = document.getElementById('vendaProdutoId').value;
            const produtoNome = document.getElementById('vendaProdutoSelecionado').value;
            const quantidade = parseInt(document.getElementById('vendaQuantidade').value) || 1;
            const formaPagamento = document.getElementById('vendaFormaPagamento').value;
            
            if (!produtoId || !produtoNome) {
                showAlert('error', 'Selecione um produto para vender!');
                return;
            }
            
            const produto = produtos.find(p => p.id == produtoId);
            if (!produto) {
                showAlert('error', 'Produto n√£o encontrado!');
                return;
            }
            
            if (produto.quantidade < quantidade) {
                showAlert('error', `Estoque insuficiente! Dispon√≠vel: ${produto.quantidade}`);
                return;
            }
            
            const valor_unitario = produto.valor_venda;
            const valor_total = valor_unitario * quantidade;
            
            if (CONFIG.MODO_DEMO) {
                // Simula registro
                const novaVenda = {
                    id: vendas.length > 0 ? Math.max(...vendas.map(v => v.id)) + 1 : 1,
                    produto_nome: produtoNome,
                    quantidade,
                    valor_unitario,
                    valor_total,
                    forma_pagamento: formaPagamento,
                    data_venda: new Date().toISOString()
                };
                vendas.unshift(novaVenda);
                
                // Atualiza estoque
                produto.quantidade -= quantidade;
                
                // Limpa formul√°rio
                limparFormVenda();
                renderizarVendas(vendas);
                carregarDashboard();
                
                showAlert('success', `Venda #${novaVenda.id} registrada com sucesso!`);
                
            } else {
                try {
                    const response = await fetch(`${CONFIG.API_URL}${CONFIG.ENDPOINTS.VENDAS}`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            produto_id: produtoId,
                            produto_nome: produtoNome,
                            quantidade,
                            valor_unitario,
                            valor_total,
                            forma_pagamento: formaPagamento
                        })
                    });
                    
                    if (!response.ok) throw new Error('Erro ao registrar venda');
                    
                    const vendaRegistrada = await response.json();
                    showAlert('success', `Venda #${vendaRegistrada.id} registrada com sucesso!`);
                    
                    limparFormVenda();
                    carregarVendas();
                    carregarProdutos();
                    carregarDashboard();
                    
                } catch (error) {
                    console.error('Erro ao registrar venda:', error);
                    showAlert('error', 'Erro ao registrar venda');
                }
            }
        }
        
        function limparFormVenda() {
            document.getElementById('vendaProdutoId').value = '';
            document.getElementById('vendaProdutoSelecionado').value = '';
            document.getElementById('vendaPrecoUnitario').value = '';
            document.getElementById('vendaQuantidade').value = '1';
            document.getElementById('estoqueDisponivel').textContent = '0';
            document.getElementById('buscarProdutoVenda').value = '';
            document.getElementById('sugestoesProdutos').style.display = 'none';
            resetarCalculoVenda();
        }
        
        function venderProduto(produtoId) {
            showPage('vendas');
            selecionarProdutoVenda(produtoId);
        }
        
        function verDetalhesVenda(vendaId) {
            // Implementar modal de detalhes da venda
            showAlert('info', 'Detalhes da venda em desenvolvimento');
        }

        // ================= ESTOQUE =================
        async function carregarAlertasEstoque() {
            const alertasDiv = document.getElementById('alertasEstoque');
            
            if (CONFIG.MODO_DEMO) {
                const produtosBaixoEstoque = produtos.filter(p => p.quantidade < 30);
                
                if (produtosBaixoEstoque.length === 0) {
                    alertasDiv.innerHTML = `
                        <div style="text-align: center; padding: 40px; color: var(--success);">
                            <i class="fas fa-check-circle" style="font-size: 48px; margin-bottom: 15px;"></i>
                            <div style="font-size: 18px; font-weight: 600;">Estoque em dia!</div>
                            <div style="color: var(--gray); margin-top: 10px;">Todos os produtos com estoque adequado</div>
                        </div>
                    `;
                    return;
                }
                
                alertasDiv.innerHTML = `
                    <table style="width: 100%;">
                        <thead>
                            <tr>
                                <th>Produto</th>
                                <th>Estoque Atual</th>
                                <th>Estoque M√≠nimo</th>
                                <th>Status</th>
                                <th>A√ß√£o Recomendada</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${produtosBaixoEstoque.map(produto => `
                                <tr>
                                    <td>
                                        <div style="font-weight: 600;">${produto.nome}</div>
                                        <div style="font-size: 12px; color: var(--gray);">${produto.descricao || ''}</div>
                                    </td>
                                    <td style="font-weight: 700; color: var(--danger);">${produto.quantidade}</td>
                                    <td>30</td>
                                    <td>
                                        <span class="badge danger">CR√çTICO</span>
                                    </td>
                                    <td>
                                        <button class="btn" onclick="comprarProduto(${produto.id})" 
                                                style="padding: 8px 16px; background: var(--warning); color: white;">
                                            <i class="fas fa-truck"></i>
                                            Comprar Agora
                                        </button>
                                    </td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                `;
            } else {
                // Implementar com API real
            }
        }
        
        function carregarProdutosParaAjuste() {
            const select = document.getElementById('ajusteProduto');
            select.innerHTML = '<option value="">Selecione um produto</option>';
            
            produtos.forEach(produto => {
                const option = document.createElement('option');
                option.value = produto.id;
                option.textContent = `${produto.nome} (Estoque: ${produto.quantidade})`;
                select.appendChild(option);
            });
        }
        
        function carregarInfoEstoque() {
            const produtoId = document.getElementById('ajusteProduto').value;
            if (!produtoId) return;
            
            const produto = produtos.find(p => p.id == produtoId);
            if (produto) {
                // Pode exibir informa√ß√µes adicionais se necess√°rio
            }
        }
        
        function toggleMotivo() {
            const tipo = document.getElementById('ajusteTipo').value;
            const motivoGroup = document.getElementById('motivoAjusteGroup');
            motivoGroup.style.display = tipo === 'correcao' ? 'block' : 'none';
        }
        
        function aplicarAjusteEstoque() {
            const produtoId = document.getElementById('ajusteProduto').value;
            const tipo = document.getElementById('ajusteTipo').value;
            const quantidade = parseInt(document.getElementById('ajusteQuantidade').value) || 0;
            const motivo = document.getElementById('ajusteMotivo').value;
            
            if (!produtoId || quantidade <= 0) {
                showAlert('error', 'Selecione um produto e informe a quantidade!');
                return;
            }
            
            const produto = produtos.find(p => p.id == produtoId);
            if (!produto) {
                showAlert('error', 'Produto n√£o encontrado!');
                return;
            }
            
            let novaQuantidade = produto.quantidade;
            
            if (tipo === 'entrada') {
                novaQuantidade += quantidade;
            } else if (tipo === 'saida') {
                if (quantidade > produto.quantidade) {
                    showAlert('error', `Quantidade maior que estoque dispon√≠vel (${produto.quantidade})!`);
                    return;
                }
                novaQuantidade -= quantidade;
            } else if (tipo === 'correcao') {
                novaQuantidade = quantidade;
            }
            
            // Em modo demo, atualiza localmente
            if (CONFIG.MODO_DEMO) {
                produto.quantidade = novaQuantidade;
                showAlert('success', `Estoque de ${produto.nome} ajustado para ${novaQuantidade} unidades`);
                carregarAlertasEstoque();
                carregarProdutosParaAjuste();
                
                // Limpa formul√°rio
                document.getElementById('ajusteQuantidade').value = '0';
                document.getElementById('ajusteMotivo').value = '';
                document.getElementById('motivoAjusteGroup').style.display = 'none';
            } else {
                // Implementar com API real
                showAlert('info', 'Ajuste de estoque via API em desenvolvimento');
            }
        }
        
        function gerarPedidoCompra() {
            const produtosCriticos = produtos.filter(p => p.quantidade < 30);
            
            if (produtosCriticos.length === 0) {
                showAlert('warning', 'N√£o h√° produtos com estoque cr√≠tico!');
                return;
            }
            
            const pedido = produtosCriticos.map(p => ({
                produto: p.nome,
                estoque_atual: p.quantidade,
                quantidade_sugerida: 50 - p.quantidade,
                custo_estimado: (50 - p.quantidade) * (p.valor_aquisicao || p.valor_venda * 0.5)
            }));
            
            let relatorio = `
                <div style="padding: 20px; background: var(--hover); border-radius: 10px; margin-top: 20px;">
                    <h3 style="margin-bottom: 20px;">
                        <i class="fas fa-file-invoice-dollar"></i>
                        Pedido de Compra Sugerido
                    </h3>
                    <table style="width: 100%;">
                        <thead>
                            <tr style="background: rgba(0,0,0,0.05);">
                                <th style="padding: 10px;">Produto</th>
                                <th style="padding: 10px;">Estoque Atual</th>
                                <th style="padding: 10px;">Qtd Sugerida</th>
                                <th style="padding: 10px;">Custo Estimado</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${pedido.map(item => `
                                <tr>
                                    <td style="padding: 10px;">${item.produto}</td>
                                    <td style="padding: 10px;">${item.estoque_atual}</td>
                                    <td style="padding: 10px;">${item.quantidade_sugerida}</td>
                                    <td style="padding: 10px;">R$ ${item.custo_estimado.toFixed(2)}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                        <tfoot>
                            <tr style="font-weight: 700; border-top: 2px solid var(--dark);">
                                <td style="padding: 10px;" colspan="3">Total Estimado:</td>
                                <td style="padding: 10px; color: var(--primary);">
                                    R$ ${pedido.reduce((sum, item) => sum + item.custo_estimado, 0).toFixed(2)}
                                </td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            `;
            
            document.getElementById('alertasEstoque').insertAdjacentHTML('beforeend', relatorio);
            showAlert('success', 'Pedido de compra gerado com sucesso!');
        }

        // ================= RELAT√ìRIOS =================
        function mostrarFiltrosRelatorio() {
            const tipo = document.getElementById('relatorioTipo').value;
            const dataGroup = document.getElementById('dataPersonalizadaGroup');
            
            if (tipo === 'personalizado') {
                dataGroup.style.display = 'block';
            } else {
                dataGroup.style.display = 'none';
            }
        }
        
        function toggleDatasPersonalizadas() {
            const periodo = document.getElementById('relatorioPeriodo').value;
            const dataGroup = document.getElementById('dataPersonalizadaGroup');
            
            dataGroup.style.display = periodo === 'personalizado' ? 'block' : 'none';
            
            // Preenche datas padr√£o se n√£o for personalizado
            if (periodo !== 'personalizado') {
                const hoje = new Date();
                const ontem = new Date(hoje);
                ontem.setDate(hoje.getDate() - 1);
                
                document.getElementById('dataInicio').value = ontem.toISOString().split('T')[0];
                document.getElementById('dataFim').value = hoje.toISOString().split('T')[0];
            }
        }
        
        function gerarRelatorio() {
            const tipo = document.getElementById('relatorioTipo').value;
            const periodo = document.getElementById('relatorioPeriodo').value;
            
            if (!tipo) {
                showAlert('error', 'Selecione um tipo de relat√≥rio!');
                return;
            }
            
            let conteudo = '';
            let titulo = '';
            
            switch(tipo) {
                case 'vendas':
                    titulo = 'Relat√≥rio de Vendas';
                    conteudo = gerarRelatorioVendas();
                    break;
                case 'produtos':
                    titulo = 'Produtos Mais Vendidos';
                    conteudo = gerarRelatorioProdutos();
                    break;
                case 'lucro':
                    titulo = 'An√°lise de Lucro';
                    conteudo = gerarRelatorioLucro();
                    break;
                case 'estoque':
                    titulo = 'Movimenta√ß√£o de Estoque';
                    conteudo = gerarRelatorioEstoque();
                    break;
                case 'comparativo':
                    titulo = 'Comparativo Peri√≥dico';
                    conteudo = gerarRelatorioComparativo();
                    break;
            }
            
            document.getElementById('relatorioTitulo').textContent = titulo;
            document.getElementById('relatorioPeriodoTexto').textContent = 
                periodo === 'personalizado' ? 'Per√≠odo Personalizado' : `Per√≠odo: ${periodo}`;
            document.getElementById('relatorioConteudo').innerHTML = conteudo;
            document.getElementById('relatorioResultado').style.display = 'block';
            
            showAlert('success', 'Relat√≥rio gerado com sucesso!');
        }
        
        function gerarRelatorioVendas() {
            // Simula dados de vendas
            const dados = [
                { data: '2024-01-01', vendas: 25, faturamento: 1250.50 },
                { data: '2024-01-02', vendas: 32, faturamento: 1680.75 },
                { data: '2024-01-03', vendas: 28, faturamento: 1450.25 },
                { data: '2024-01-04', vendas: 41, faturamento: 2100.00 },
                { data: '2024-01-05', vendas: 36, faturamento: 1850.50 }
            ];
            
            const totalVendas = dados.reduce((sum, item) => sum + item.vendas, 0);
            const totalFaturamento = dados.reduce((sum, item) => sum + item.faturamento, 0);
            const mediaVendas = totalVendas / dados.length;
            
            return `
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 30px;">
                    <div style="background: #e3f2fd; padding: 20px; border-radius: 10px; text-align: center;">
                        <div style="color: #1976d2; font-size: 12px; margin-bottom: 5px;">Total de Vendas</div>
                        <div style="font-size: 28px; font-weight: 700; color: #1976d2;">${totalVendas}</div>
                    </div>
                    <div style="background: #e8f5e9; padding: 20px; border-radius: 10px; text-align: center;">
                        <div style="color: #388e3c; font-size: 12px; margin-bottom: 5px;">Faturamento Total</div>
                        <div style="font-size: 28px; font-weight: 700; color: #388e3c;">R$ ${totalFaturamento.toFixed(2)}</div>
                    </div>
                    <div style="background: #fff3e0; padding: 20px; border-radius: 10px; text-align: center;">
                        <div style="color: #f57c00; font-size: 12px; margin-bottom: 5px;">M√©dia por Dia</div>
                        <div style="font-size: 28px; font-weight: 700; color: #f57c00;">${mediaVendas.toFixed(1)}</div>
                    </div>
                </div>
                
                <table style="width: 100%;">
                    <thead>
                        <tr style="background: rgba(0,0,0,0.05);">
                            <th style="padding: 12px;">Data</th>
                            <th style="padding: 12px;">Vendas</th>
                            <th style="padding: 12px;">Faturamento</th>
                            <th style="padding: 12px;">Ticket M√©dio</th>
                            <th style="padding: 12px;">Tend√™ncia</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${dados.map(item => `
                            <tr>
                                <td style="padding: 12px;">${new Date(item.data).toLocaleDateString('pt-BR')}</td>
                                <td style="padding: 12px;">${item.vendas}</td>
                                <td style="padding: 12px;">R$ ${item.faturamento.toFixed(2)}</td>
                                <td style="padding: 12px;">R$ ${(item.faturamento / item.vendas).toFixed(2)}</td>
                                <td style="padding: 12px;">
                                    <span style="color: ${item.vendas > 30 ? '#4caf50' : '#f44336'};">
                                        ${item.vendas > 30 ? 'üìà Alta' : 'üìâ Baixa'}
                                    </span>
                                </td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
        }
        
        function gerarRelatorioProdutos() {
            // Produtos mais vendidos (simulado)
            const produtosMaisVendidos = [
                { nome: 'Pizza Grande', vendas: 150, faturamento: 6750.00 },
                { nome: 'Refri 2L', vendas: 280, faturamento: 2800.00 },
                { nome: 'Esfiha Carne', vendas: 420, faturamento: 2100.00 },
                { nome: 'Coca 350ml', vendas: 180, faturamento: 1440.00 },
                { nome: 'Pizza M√©dia', vendas: 95, faturamento: 3325.00 }
            ];
            
            return `
                <div style="margin-bottom: 30px;">
                    <div style="display: flex; justify-content: center; margin-bottom: 20px;">
                        <div style="width: 300px; height: 300px;">
                            <canvas id="relatorioProdutosChart"></canvas>
                        </div>
                    </div>
                </div>
                
                <table style="width: 100%;">
                    <thead>
                        <tr style="background: rgba(0,0,0,0.05);">
                            <th style="padding: 12px;">Posi√ß√£o</th>
                            <th style="padding: 12px;">Produto</th>
                            <th style="padding: 12px;">Vendas</th>
                            <th style="padding: 12px;">Faturamento</th>
                            <th style="padding: 12px;">Participa√ß√£o</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${produtosMaisVendidos.map((produto, index) => {
                            const totalFaturamento = produtosMaisVendidos.reduce((sum, p) => sum + p.faturamento, 0);
                            const participacao = (produto.faturamento / totalFaturamento * 100).toFixed(1);
                            
                            return `
                                <tr>
                                    <td style="padding: 12px;">
                                        <div style="width: 30px; height: 30px; background: ${
                                            index === 0 ? '#ffd700' : 
                                            index === 1 ? '#c0c0c0' : 
                                            index === 2 ? '#cd7f32' : '#e0e0e0'
                                        }; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">
                                            ${index + 1}
                                        </div>
                                    </td>
                                    <td style="padding: 12px; font-weight: 600;">${produto.nome}</td>
                                    <td style="padding: 12px;">${produto.vendas}</td>
                                    <td style="padding: 12px; color: var(--primary); font-weight: 700;">
                                        R$ ${produto.faturamento.toFixed(2)}
                                    </td>
                                    <td style="padding: 12px;">
                                        <div style="display: flex; align-items: center; gap: 10px;">
                                            <div style="flex: 1; height: 10px; background: #e0e0e0; border-radius: 5px; overflow: hidden;">
                                                <div style="height: 100%; background: var(--primary); width: ${participacao}%;"></div>
                                            </div>
                                            <span>${participacao}%</span>
                                        </div>
                                    </td>
                                </tr>
                            `;
                        }).join('')}
                    </tbody>
                </table>
                
                <script>
                    // Cria gr√°fico do relat√≥rio
                    const ctx = document.getElementById('relatorioProdutosChart').getContext('2d');
                    new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: ${JSON.stringify(produtosMaisVendidos.map(p => p.nome))},
                            datasets: [{
                                label: 'Vendas',
                                data: ${JSON.stringify(produtosMaisVendidos.map(p => p.vendas))},
                                backgroundColor: '#4361ee'
                            }]
                        },
                        options: {
                            responsive: true,
                            plugins: {
                                legend: {
                                    display: false
                                }
                            }
                        }
                    });
                <\/script>
            `;
        }

        // ================= FUN√á√ïES UTILIT√ÅRIAS =================
        function sincronizarDados() {
            if (CONFIG.MODO_DEMO) {
                showAlert('success', 'Sistema em modo demonstra√ß√£o. Dados sincronizados localmente.');
                return;
            }
            
            showAlert('info', 'Sincronizando dados com servidor...');
            
            setTimeout(() => {
                carregarDashboard();
                carregarProdutos();
                carregarVendas();
                showAlert('success', 'Dados sincronizados com sucesso!');
            }, 1000);
        }
        
        function registrarVendaRapida() {
            document.getElementById('modalVendaRapida').style.display = 'flex';
            document.getElementById('codigoRapido').focus();
        }
        
        function fecharModalVendaRapida() {
            document.getElementById('modalVendaRapida').style.display = 'none';
            document.getElementById('codigoRapido').value = '';
        }
        
        function processarVendaRapida() {
            const codigo = document.getElementById('codigoRapido').value.trim();
            if (!codigo) {
                showAlert('error', 'Digite um c√≥digo ou nome de produto!');
                return;
            }
            
            // Encontra produto pelo c√≥digo/nome
            const produto = produtos.find(p => 
                p.id.toString() === codigo || 
                p.nome.toLowerCase().includes(codigo.toLowerCase())
            );
            
            if (!produto) {
                showAlert('error', 'Produto n√£o encontrado!');
                return;
            }
            
            if (produto.quantidade <= 0) {
                showAlert('error', 'Produto sem estoque dispon√≠vel!');
                return;
            }
            
            // Simula venda r√°pida
            selecionarProdutoVenda(produto.id);
            fecharModalVendaRapida();
            showPage('vendas');
            
            setTimeout(() => {
                registrarVenda();
            }, 500);
        }
        
        function exportarDados() {
            if (CONFIG.MODO_DEMO) {
                const dados = {
                    produtos: produtos,
                    vendas: vendas,
                    exportado_em: new Date().toISOString()
                };
                
                const dadosStr = JSON.stringify(dados, null, 2);
                const blob = new Blob([dadosStr], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                
                a.href = url;
                a.download = `backup-vendas-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showAlert('success', 'Backup exportado com sucesso!');
            } else {
                showAlert('info', 'Exporta√ß√£o via API em desenvolvimento');
            }
        }
        
        function atualizarHora() {
            // Pode adicionar rel√≥gio no header se necess√°rio
        }
        
        function importarProdutos() {
            showAlert('info', 'Funcionalidade de importa√ß√£o em desenvolvimento');
        }
        
        function filtrarVendas() {
            const filtro = document.getElementById('filtroVendas').value;
            // Implementar filtragem
            showAlert('info', `Filtrando vendas por: ${filtro}`);
        }
        
        function exportarRelatorioPDF() {
            showAlert('info', 'Exporta√ß√£o para PDF em desenvolvimento');
        }
        
        function exportarRelatorioExcel() {
            showAlert('info', 'Exporta√ß√£o para Excel em desenvolvimento');
        }
        
        function comprarProduto(produtoId) {
            showAlert('info', 'Funcionalidade de compra em desenvolvimento');
        }

        // ================= MODO DEMONSTRA√á√ÉO =================
        function inicializarDemo() {
            // Inicializa dados de demonstra√ß√£o
            produtos = [
                { id: 1, nome: "Pizza Grande", descricao: "Pizza 8 peda√ßos", quantidade: 8, valor_venda: 45.00, valor_aquisicao: 20.00 },
                { id: 2, nome: "Refri 2L", descricao: "Coca-Cola 2 litros", quantidade: 12, valor_venda: 10.00, valor_aquisicao: 6.00 },
                { id: 3, nome: "Esfiha", descricao: "Esfiha de carne", quantidade: 45, valor_venda: 5.00, valor_aquisicao: 2.00 },
                { id: 4, nome: "Coca 350ml", descricao: "Coca-Cola lata", quantidade: 60, valor_venda: 8.00, valor_aquisicao: 4.00 },
                { id: 5, nome: "Pizza M√©dia", descricao: "Pizza 6 peda√ßos", quantidade: 25, valor_venda: 35.00, valor_aquisicao: 15.00 }
            ];
            
            vendas = [
                { id: 1, produto_nome: "Pizza Grande", quantidade: 2, valor_unitario: 45.00, valor_total: 90.00, forma_pagamento: "dinheiro", data_venda: new Date().toISOString() },
                { id: 2, produto_nome: "Refri 2L", quantidade: 3, valor_unitario: 10.00, valor_total: 30.00, forma_pagamento: "cartao", data_venda: new Date(Date.now() - 86400000).toISOString() },
                { id: 3, produto_nome: "Esfiha", quantidade: 10, valor_unitario: 5.00, valor_total: 50.00, forma_pagamento: "pix", data_venda: new Date(Date.now() - 172800000).toISOString() }
            ];
            
            // Carrega dados iniciais
            carregarDashboard();
            renderizarProdutos(produtos);
            renderizarVendas(vendas);
            
            console.log('Sistema em modo demonstra√ß√£o. Para usar com API, altere CONFIG.MODO_DEMO para false.');
        }

        // ================= INICIALIZA√á√ÉO FINAL =================
        // Inicializa o sistema quando a p√°gina carrega
        setTimeout(() => {
            if (CONFIG.MODO_DEMO) {
                showAlert('warning', 'Sistema em MODO DEMONSTRA√á√ÉO. Para usar com API, configure CONFIG.MODO_DEMO = false');
            } else {
                showAlert('success', 'Sistema conectado ao servidor!', 2000);
            }
        }, 1500);
    </script>
</body>
</html>
